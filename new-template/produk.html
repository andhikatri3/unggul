<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Produk Desa - Desa Penunggul</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css">

    <style>
        .bg-primary { background-color: #22c55e; }
        .bg-primary-dark { background-color: #16a34a; }
        .text-primary { color: #22c55e; }
        .border-primary { border-color: #22c55e; }
        .mobile-menu { transform: translateX(-100%); transition: transform 0.3s ease-in-out; }
        .mobile-menu.active { transform: translateX(0); }
        .digital-clock { font-family: 'Courier New', monospace; background: linear-gradient(45deg, #16a34a, #22c55e); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .modal { display: none; }
        .modal.active { display: block; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-lg">
        <!-- Top Header -->
        <div class="bg-primary text-white py-2">
            <div class="container mx-auto px-4 flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <i class="fas fa-phone text-sm"></i>
                    <span class="text-sm">+62 XXX-XXXX-XXXX</span>
                    <i class="fas fa-envelope text-sm ml-4"></i>
                    <span class="text-sm">desa.penunggul@email.com</span>
                </div>
                <div class="flex items-center space-x-2">
                    <i class="fas fa-clock"></i>
                    <span id="digital-clock" class="digital-clock text-white font-bold"></span>
                </div>
            </div>
        </div>
        
        <!-- Main Header -->
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <img src="https://via.placeholder.com/80x80/22c55e/ffffff?text=LOGO" alt="Logo Desa Penunggul" class="w-16 h-16 md:w-20 md:h-20">
                    <div>
                        <h1 class="text-xl md:text-2xl font-bold text-gray-800">DESA PENUNGGUL</h1>
                        <p class="text-sm md:text-base text-gray-600">Kecamatan XXX, Kabupaten XXX</p>
                        <p class="text-xs md:text-sm text-primary font-semibold">Provinsi Jawa Timur</p>
                    </div>
                </div>
                <button id="mobile-menu-btn" class="md:hidden text-gray-600 hover:text-primary">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Sticky Navigation Menu -->
    <nav class="bg-primary-dark text-white sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto px-4">
            <!-- Desktop Menu -->
            <ul class="hidden md:flex space-x-8 py-3">
                <li class="relative group"><a href="index.html" class="flex items-center space-x-1 hover:text-green-200 transition-colors"><i class="fas fa-home"></i><span>Beranda</span></a></li>
                <li class="relative group"><a href="produk.html" class="flex items-center space-x-1 hover:text-green-200 transition-colors"><i class="fas fa-store"></i><span>Produk</span></a></li>
                <li class="relative group"><a href="detail.html" class="flex items-center space-x-1 hover:text-green-200 transition-colors"><i class="fas fa-newspaper"></i><span>Artikel</span></a></li>
                <li class="relative group"><a href="#" class="flex items-center space-x-1 hover:text-green-200 transition-colors"><i class="fas fa-phone"></i><span>Kontak</span></a></li>
                <li class="relative group"><a href="statistik.html" class="flex items-center space-x-1 hover:text-green-200 transition-colors"><i class="fas fa-chart-pie"></i><span>Statistik</span></a></li>
            </ul>
            
            <!-- Mobile Menu Bar -->
            <div class="md:hidden flex items-center justify-between py-3">
                <div class="flex items-center space-x-2">
                    <img src="https://via.placeholder.com/40x40/22c55e/ffffff?text=LOGO" alt="Logo" class="w-8 h-8">
                    <span class="font-semibold text-lg">Desa Penunggul</span>
                </div>
                <button id="mobile-menu-btn-sticky" class="text-white hover:text-green-200">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu" class="mobile-menu fixed top-0 left-0 w-80 h-full bg-white shadow-2xl z-50 md:hidden">
        <div class="p-4 bg-primary text-white flex justify-between items-center">
            <h3 class="font-bold text-lg">Menu Navigasi</h3>
            <button id="close-menu-btn" class="text-white hover:text-green-200">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
        <ul class="py-4">
            <li><a href="index.html" class="block px-6 py-3 text-gray-700 hover:bg-green-50 hover:text-primary border-b"><i class="fas fa-home mr-3"></i>Beranda</a></li>
            <li><a href="produk.html" class="block px-6 py-3 text-gray-700 hover:bg-green-50 hover:text-primary border-b"><i class="fas fa-store mr-3"></i>Produk</a></li>
            <li><a href="detail.html" class="block px-6 py-3 text-gray-700 hover:bg-green-50 hover:text-primary border-b"><i class="fas fa-newspaper mr-3"></i>Artikel</a></li>
            <li><a href="#" class="block px-6 py-3 text-gray-700 hover:bg-green-50 hover:text-primary"><i class="fas fa-phone mr-3"></i>Kontak</a></li>
            <li><a href="statistik.html" class="block px-6 py-3 text-gray-700 hover:bg-green-50 hover:text-primary"><i class="fas fa-chart-pie mr-3"></i>Statistik</a></li>
        </ul>
    </div>
    <div id="mobile-menu-backdrop" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden md:hidden"></div>

    <!-- Toolbar: Filters & Sorting -->
    <section class="bg-white border-b">
        <div class="container mx-auto px-4 py-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
            <div class="flex flex-wrap items-center gap-3">
                <span class="text-gray-700 font-semibold">Kategori:</span>
                <button data-filter="all" class="filter-btn px-4 py-2 rounded-full text-sm bg-green-100 text-primary hover:bg-green-200">Semua</button>
                <button data-filter="pangan" class="filter-btn px-4 py-2 rounded-full text-sm bg-gray-100 hover:bg-gray-200">Pangan</button>
                <button data-filter="kerajinan" class="filter-btn px-4 py-2 rounded-full text-sm bg-gray-100 hover:bg-gray-200">Kerajinan</button>
                <button data-filter="umkm" class="filter-btn px-4 py-2 rounded-full text-sm bg-gray-100 hover:bg-gray-200">UMKM</button>
            </div>
            <div class="flex items-center gap-3">
                <span class="text-gray-700 font-semibold">Urutkan:</span>
                <select id="sort-select" class="border rounded-lg px-3 py-2 text-sm">
                    <option value="default">Default</option>
                    <option value="price-asc">Harga Termurah</option>
                    <option value="price-desc">Harga Termahal</option>
                </select>
            </div>
        </div>
    </section>

    <!-- Products Grid -->
    <section class="py-8">
        <div class="container mx-auto px-4">
            <div id="products-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- Product Card Template Examples -->
                <div class="product-card bg-white rounded-lg shadow-md overflow-hidden" data-category="pangan" data-price="15000">
                    <div class="swiper product-swiper">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide"><img src="https://via.placeholder.com/600x400/22c55e/ffffff?text=Pisang+Sale+1" class="w-full h-48 object-cover" alt=""></div>
                            <div class="swiper-slide"><img src="https://via.placeholder.com/600x400/16a34a/ffffff?text=Pisang+Sale+2" class="w-full h-48 object-cover" alt=""></div>
                            <div class="swiper-slide"><img src="https://via.placeholder.com/600x400/15803d/ffffff?text=Pisang+Sale+3" class="w-full h-48 object-cover" alt=""></div>
                        </div>
                        <div class="swiper-pagination"></div>
                    </div>
                    <div class="p-4">
                        <h3 class="font-semibold text-gray-800 mb-1">Pisang Sale Premium</h3>
                        <div class="flex items-baseline gap-2 mb-2">
                            <span class="text-lg font-bold text-primary">Rp15.000</span>
                            <span class="text-sm text-gray-400 line-through">Rp18.000</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs text-gray-500 mb-3">
                            <i class="fas fa-tags"></i>
                            <span>Pangan</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <button class="detail-btn bg-green-100 text-primary hover:bg-green-200 px-3 py-2 rounded-md text-sm" data-name="Pisang Sale Premium" data-price="15000" data-desc="Pisang sale premium dibuat dari pisang pilihan, manis dan legit.">
                                Detail
                            </button>
                            <a target="_blank" href="https://wa.me/6281234567890?text=Halo,%20saya%20ingin%20membeli%20Pisang%20Sale%20Premium" class="bg-primary hover:bg-primary-dark text-white px-3 py-2 rounded-md text-sm">
                                <i class="fab fa-whatsapp mr-1"></i> WA
                            </a>
                            <a target="_blank" href="https://maps.google.com/?q=Desa%20Penunggul" class="bg-gray-100 hover:bg-gray-200 text-gray-800 px-3 py-2 rounded-md text-sm">
                                <i class="fas fa-map-marker-alt mr-1"></i> Maps
                            </a>
                        </div>
                    </div>
                </div>

                <div class="product-card bg-white rounded-lg shadow-md overflow-hidden" data-category="kerajinan" data-price="55000">
                    <div class="swiper product-swiper">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide"><img src="https://via.placeholder.com/600x400/22c55e/ffffff?text=Tas+Anyam+1" class="w-full h-48 object-cover" alt=""></div>
                            <div class="swiper-slide"><img src="https://via.placeholder.com/600x400/16a34a/ffffff?text=Tas+Anyam+2" class="w-full h-48 object-cover" alt=""></div>
                        </div>
                        <div class="swiper-pagination"></div>
                    </div>
                    <div class="p-4">
                        <h3 class="font-semibold text-gray-800 mb-1">Tas Anyam Pandan</h3>
                        <div class="flex items-baseline gap-2 mb-2">
                            <span class="text-lg font-bold text-primary">Rp55.000</span>
                            <span class="text-sm text-gray-400 line-through">Rp65.000</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs text-gray-500 mb-3">
                            <i class="fas fa-tags"></i>
                            <span>Kerajinan</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <button class="detail-btn bg-green-100 text-primary hover:bg-green-200 px-3 py-2 rounded-md text-sm" data-name="Tas Anyam Pandan" data-price="55000" data-desc="Tas anyaman pandan buatan UMKM lokal, kuat dan elegan.">
                                Detail
                            </button>
                            <a target="_blank" href="https://wa.me/6281234567890?text=Halo,%20saya%20ingin%20membeli%20Tas%20Anyam%20Pandan" class="bg-primary hover:bg-primary-dark text-white px-3 py-2 rounded-md text-sm">
                                <i class="fab fa-whatsapp mr-1"></i> WA
                            </a>
                            <a target="_blank" href="https://maps.google.com/?q=Desa%20Penunggul" class="bg-gray-100 hover:bg-gray-200 text-gray-800 px-3 py-2 rounded-md text-sm">
                                <i class="fas fa-map-marker-alt mr-1"></i> Maps
                            </a>
                        </div>
                    </div>
                </div>

                <div class="product-card bg-white rounded-lg shadow-md overflow-hidden" data-category="umkm" data-price="32000">
                    <div class="swiper product-swiper">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide"><img src="https://via.placeholder.com/600x400/22c55e/ffffff?text=Sambal+Udang+1" class="w-full h-48 object-cover" alt=""></div>
                            <div class="swiper-slide"><img src="https://via.placeholder.com/600x400/16a34a/ffffff?text=Sambal+Udang+2" class="w-full h-48 object-cover" alt=""></div>
                            <div class="swiper-slide"><img src="https://via.placeholder.com/600x400/15803d/ffffff?text=Sambal+Udang+3" class="w-full h-48 object-cover" alt=""></div>
                        </div>
                        <div class="swiper-pagination"></div>
                    </div>
                    <div class="p-4">
                        <h3 class="font-semibold text-gray-800 mb-1">Sambal Udang Rebon</h3>
                        <div class="flex items-baseline gap-2 mb-2">
                            <span class="text-lg font-bold text-primary">Rp32.000</span>
                            <span class="text-sm text-gray-400 line-through">Rp38.000</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs text-gray-500 mb-3">
                            <i class="fas fa-tags"></i>
                            <span>UMKM</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <button class="detail-btn bg-green-100 text-primary hover:bg-green-200 px-3 py-2 rounded-md text-sm" data-name="Sambal Udang Rebon" data-price="32000" data-desc="Sambal udang rebon khas pesisir, pedas nikmat pelengkap makan.">
                                Detail
                            </button>
                            <a target="_blank" href="https://wa.me/6281234567890?text=Halo,%20saya%20ingin%20membeli%20Sambal%20Udang%20Rebon" class="bg-primary hover:bg-primary-dark text-white px-3 py-2 rounded-md text-sm">
                                <i class="fab fa-whatsapp mr-1"></i> WA
                            </a>
                            <a target="_blank" href="https://maps.google.com/?q=Desa%20Penunggul" class="bg-gray-100 hover:bg-gray-200 text-gray-800 px-3 py-2 rounded-md text-sm">
                                <i class="fas fa-map-marker-alt mr-1"></i> Maps
                            </a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Mangrove Sunset Silhouette Section -->
    <section class="relative overflow-hidden">
        <style>
            .sunset-bg { background: linear-gradient(180deg, #fde68a 0%, #f59e0b 45%, #7c3aed 100%); }
            .silhouette-img { filter: saturate(0) brightness(0); opacity: 0.95; }
        </style>
        <div class="sunset-bg h-28 md:h-40 w-full"></div>
        <div class="absolute inset-x-0 bottom-6 md:bottom-8 flex items-end justify-around px-4 gap-4">
            <img src="https://w7.pngwing.com/pngs/870/70/png-transparent-silhouette-tree-mangrove-animals-leaf-branch.png" alt="Mangrove" class="silhouette-img h-16 md:h-24 object-contain">
            <img src="https://www.shutterstock.com/image-vector/mangrove-tree-vector-silhouette-black-260nw-1756455536.jpg" alt="Mangrove" class="silhouette-img h-12 md:h-20 object-contain">
            <img src="https://www.shutterstock.com/image-vector/mangrove-tree-vector-silhouette-black-260nw-1695821851.jpg" alt="Mangrove" class="silhouette-img h-20 md:h-28 object-contain">
            <img src="https://www.shutterstock.com/image-vector/beautiful-tree-silhouette-260nw-663695179.jpg" alt="Tree" class="silhouette-img h-14 md:h-22 object-contain">
            <img src="https://w7.pngwing.com/pngs/870/70/png-transparent-silhouette-tree-mangrove-animals-leaf-branch.png" alt="Mangrove" class="silhouette-img h-12 md:h-20 object-contain">
        </div>
        <svg class="absolute bottom-0 left-0 w-full" viewBox="0 0 1200 90" preserveAspectRatio="none">
            <path d="M0,40 C200,90 400,0 600,40 C800,80 1000,20 1200,60 L1200,90 L0,90 Z" fill="#1f2937"/>
        </svg>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white">
        <div class="container mx-auto px-4 py-12">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- About Section -->
                <div>
                    <div class="flex items-center space-x-3 mb-4">
                        <img src="https://via.placeholder.com/50x50/22c55e/ffffff?text=LOGO" alt="Logo" class="w-12 h-12">
                        <div>
                            <h3 class="font-bold text-lg">Desa Penunggul</h3>
                            <p class="text-sm text-gray-300">Jawa Timur</p>
                        </div>
                    </div>
                    <p class="text-gray-300 text-sm mb-4">
                        Desa Penunggul adalah desa yang berkomitmen untuk mewujudkan masyarakat yang maju, mandiri, dan sejahtera melalui berbagai program pembangunan dan pemberdayaan masyarakat.
                    </p>
                    <div class="flex space-x-3">
                        <a href="#" class="text-gray-300 hover:text-primary transition-colors"><i class="fab fa-facebook text-xl"></i></a>
                        <a href="#" class="text-gray-300 hover:text-primary transition-colors"><i class="fab fa-instagram text-xl"></i></a>
                        <a href="#" class="text-gray-300 hover:text-primary transition-colors"><i class="fab fa-youtube text-xl"></i></a>
                        <a href="#" class="text-gray-300 hover:text-primary transition-colors"><i class="fab fa-whatsapp text-xl"></i></a>
                    </div>
                </div>
                
                <!-- Quick Links -->
                <div>
                    <h4 class="font-bold text-lg mb-4">Menu Utama</h4>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="text-gray-300 hover:text-primary transition-colors text-sm">Beranda</a></li>
                        <li><a href="produk.html" class="text-gray-300 hover:text-primary transition-colors text-sm">Produk</a></li>
                        <li><a href="detail.html" class="text-gray-300 hover:text-primary transition-colors text-sm">Artikel</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-primary transition-colors text-sm">Kontak</a></li>
                    </ul>
                </div>
                
                <!-- Services -->
                <div>
                    <h4 class="font-bold text-lg mb-4">Layanan</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-primary transition-colors text-sm">Data Statistik</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-primary transition-colors text-sm">Peta Desa</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-primary transition-colors text-sm">Pengumuman</a></li>
                    </ul>
                </div>
                
                <!-- Contact Info -->
                <div>
                    <h4 class="font-bold text-lg mb-4">Kontak Kami</h4>
                    <div class="space-y-3">
                        <div class="flex items-start space-x-3">
                            <i class="fas fa-map-marker-alt text-primary mt-1"></i>
                            <div>
                                <p class="text-sm text-gray-300">Jl. Raya Desa Penunggul</p>
                                <p class="text-sm text-gray-300">Kec. XXX, Kab. XXX</p>
                                <p class="text-sm text-gray-300">Jawa Timur, Indonesia</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-phone text-primary"></i>
                            <span class="text-sm text-gray-300">+62 XXX-XXXX-XXXX</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-envelope text-primary"></i>
                            <span class="text-sm text-gray-300">desa.penunggul@email.com</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-globe text-primary"></i>
                            <span class="text-sm text-gray-300">www.penunggul.desa.id</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Bottom Footer -->
        <div class="border-t border-gray-700">
            <div class="container mx-auto px-4 py-6">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <p class="text-sm text-gray-300 mb-4 md:mb-0">Â© 2024 Desa Penunggul. Semua hak cipta dilindungi.</p>
                    <div class="flex items-center space-x-4 text-sm text-gray-300">
                        <span>Powered by OpenSID</span>
                        <span>|</span>
                        <a href="#" class="hover:text-primary transition-colors">Kebijakan Privasi</a>
                        <span>|</span>
                        <a href="#" class="hover:text-primary transition-colors">Syarat & Ketentuan</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Detail Modal -->
    <div id="detail-modal" class="modal fixed inset-0 z-[60]">
        <div class="absolute inset-0 bg-black/60" id="detail-backdrop"></div>
        <div class="absolute inset-0 flex items-center justify-center p-4">
            <div class="bg-white rounded-lg shadow-2xl w-full max-w-3xl overflow-hidden">
                <div class="flex items-center justify-between px-4 py-3 border-b">
                    <h3 id="modal-title" class="font-bold text-lg text-gray-800">Nama Produk</h3>
                    <button id="modal-close" class="text-gray-500 hover:text-gray-800"><i class="fas fa-times text-xl"></i></button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-0">
                    <div class="p-4">
                        <div class="swiper modal-swiper rounded-md overflow-hidden">
                            <div class="swiper-wrapper" id="modal-images">
                                <!-- injected slides -->
                            </div>
                            <div class="swiper-pagination"></div>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="mb-2">
                            <span id="modal-price" class="text-2xl font-bold text-primary">Rp0</span>
                            <span id="modal-price-strike" class="text-sm text-gray-400 line-through ml-2 hidden">Rp0</span>
                        </div>
                        <div id="modal-desc" class="text-gray-700 leading-relaxed text-sm mb-4">Deskripsi produk lengkap.</div>
                        <div class="flex gap-2">
                            <a id="modal-wa" target="_blank" href="#" class="bg-primary hover:bg-primary-dark text-white px-4 py-2 rounded-md text-sm"><i class="fab fa-whatsapp mr-2"></i>Hubungi Penjual</a>
                            <a id="modal-maps" target="_blank" href="#" class="bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-md text-sm"><i class="fas fa-map-marker-alt mr-2"></i>Lokasi</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

    <script>
        // Digital Clock
        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const timeString = `${hours}:${minutes}:${seconds}`;
            const el = document.getElementById('digital-clock');
            if (el) el.textContent = timeString;
        }
        setInterval(updateClock, 1000);
        updateClock();

        // Mobile Menu Toggle
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenuBtnSticky = document.getElementById('mobile-menu-btn-sticky');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileMenuBackdrop = document.getElementById('mobile-menu-backdrop');
        const closeMenuBtn = document.getElementById('close-menu-btn');
        function openMobileMenu() { mobileMenu.classList.add('active'); mobileMenuBackdrop.classList.remove('hidden'); document.body.style.overflow = 'hidden'; }
        function closeMobileMenu() { mobileMenu.classList.remove('active'); mobileMenuBackdrop.classList.add('hidden'); document.body.style.overflow = ''; }
        if (mobileMenuBtn) mobileMenuBtn.addEventListener('click', openMobileMenu);
        if (mobileMenuBtnSticky) mobileMenuBtnSticky.addEventListener('click', openMobileMenu);
        if (closeMenuBtn) closeMenuBtn.addEventListener('click', closeMobileMenu);
        if (mobileMenuBackdrop) mobileMenuBackdrop.addEventListener('click', closeMobileMenu);

        // Instantiate Swipers for each product
        const productSwipers = Array.from(document.querySelectorAll('.product-swiper')).map((el) => new Swiper(el, {
            loop: true,
            autoplay: { delay: 4000, disableOnInteraction: false },
            pagination: { el: el.querySelector('.swiper-pagination'), clickable: true },
        }));

        // Filtering & Sorting
        const productsGrid = document.getElementById('products-grid');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const sortSelect = document.getElementById('sort-select');

        function applyFilterAndSort() {
            const activeFilterBtn = document.querySelector('.filter-btn.active');
            const filter = activeFilterBtn ? activeFilterBtn.getAttribute('data-filter') : 'all';
            const sort = sortSelect.value;

            const cards = Array.from(productsGrid.children);

            // Filter
            cards.forEach(card => {
                const cat = card.getAttribute('data-category');
                const visible = (filter === 'all' || filter === cat);
                card.style.display = visible ? '' : 'none';
            });

            // Sort
            const visibleCards = cards.filter(c => c.style.display !== 'none');
            visibleCards.sort((a, b) => {
                const pa = parseInt(a.getAttribute('data-price'), 10);
                const pb = parseInt(b.getAttribute('data-price'), 10);
                if (sort === 'price-asc') return pa - pb;
                if (sort === 'price-desc') return pb - pa;
                return 0;
            });
            visibleCards.forEach(c => productsGrid.appendChild(c));
        }

        filterButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                filterButtons.forEach(b => b.classList.remove('active', 'bg-green-100', 'text-primary'));
                filterButtons.forEach(b => b.classList.add('bg-gray-100'));
                btn.classList.add('active');
                btn.classList.remove('bg-gray-100');
                btn.classList.add('bg-green-100', 'text-primary');
                applyFilterAndSort();
            });
        });
        sortSelect.addEventListener('change', applyFilterAndSort);
        // Initialize default filter button
        const defaultFilterBtn = document.querySelector('.filter-btn[data-filter="all"]');
        defaultFilterBtn.classList.add('active');
        applyFilterAndSort();

        // Detail Modal Logic
        const modal = document.getElementById('detail-modal');
        const modalBackdrop = document.getElementById('detail-backdrop');
        const modalClose = document.getElementById('modal-close');
        const modalTitle = document.getElementById('modal-title');
        const modalDesc = document.getElementById('modal-desc');
        const modalPrice = document.getElementById('modal-price');
        const modalPriceStrike = document.getElementById('modal-price-strike');
        const modalImages = document.getElementById('modal-images');
        const modalWA = document.getElementById('modal-wa');
        const modalMaps = document.getElementById('modal-maps');
        let modalSwiper;

        function formatRupiah(n) { return 'Rp' + n.toLocaleString('id-ID'); }

        function openModalFromCard(card, name, price, desc) {
            // Title & Price
            modalTitle.textContent = name;
            modalPrice.textContent = formatRupiah(Number(price));
            // Example strike price: +20%
            const strike = Math.round(Number(price) * 1.2);
            modalPriceStrike.textContent = formatRupiah(strike);
            modalPriceStrike.classList.remove('hidden');
            // Desc
            modalDesc.textContent = desc;
            // Images: clone from product swiper
            modalImages.innerHTML = '';
            const slides = card.querySelectorAll('.product-swiper .swiper-slide img');
            slides.forEach(img => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                const cloned = document.createElement('img');
                cloned.src = img.src;
                cloned.className = 'w-full h-64 object-cover';
                slide.appendChild(cloned);
                modalImages.appendChild(slide);
            });
            // WA & Maps
            const waText = encodeURIComponent(`Halo, saya ingin membeli ${name}`);
            modalWA.href = `https://wa.me/6281234567890?text=${waText}`;
            modalMaps.href = 'https://maps.google.com/?q=Desa%20Penunggul';

            // Open modal
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';

            // Init or update swiper
            if (modalSwiper) modalSwiper.destroy(true, true);
            modalSwiper = new Swiper('.modal-swiper', {
                loop: true,
                autoplay: { delay: 3000, disableOnInteraction: false },
                pagination: { el: '.modal-swiper .swiper-pagination', clickable: true },
            });
        }

        function closeModal() {
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        document.querySelectorAll('.detail-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const card = e.target.closest('.product-card');
                const name = btn.getAttribute('data-name');
                const price = btn.getAttribute('data-price');
                const desc = btn.getAttribute('data-desc');
                openModalFromCard(card, name, price, desc);
            });
        });
        modalBackdrop.addEventListener('click', closeModal);
        modalClose.addEventListener('click', closeModal);

        // Add scroll effect to sticky navigation
        window.addEventListener('scroll', function() {
            const nav = document.querySelector('nav');
            if (window.scrollY > 100) nav.classList.add('shadow-2xl'); else nav.classList.remove('shadow-2xl');
        });
    </script>
</body>
</html>


